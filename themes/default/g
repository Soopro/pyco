{% set navigation = saltshaker(pages,["nav","url"],true) %}
<!-- taxonomy -->
{% set terms = saltshaker(pages,[meta.taxonomy]) if meta.taxonomy %}
{% set raw_pages = terms if terms else pages %}
{% set term_pages = [] %}
{% for page in raw_pages if terms and args.t == page[meta.taxonomy]%}
	{% do term_pages.append(page) %}
{% endfor %}

<!-- paged pages -->
{% set paged = args.paged|int if args.paged and args.paged|int > 0 else 1 %}
{% set perpage = theme_meta.perpage|int if theme_meta.perpage else 6 %}

{% set sorted_pages = sort_by_date(saltshaker(pages,["thumbnail"], true)) %}

{% set current_date = None %}
{% for item in sorted_pages %}
    {% if item.date not in current_date %}
            {% set current_date = item.date %}
        // first page
    {% else %}
       //page
    {% endif %}
{% endfor %}